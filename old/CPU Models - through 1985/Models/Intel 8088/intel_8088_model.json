{
  "model_name": "Intel 8088 CPU Queueing Model",
  "version": "1.0",
  "date": "2026-01-23",
  "description": "Grey-box queueing model for the Intel 8088 microprocessor (IBM PC)",
  
  "architecture": {
    "cpu_model": "Intel 8088",
    "manufacturer": "Intel Corporation",
    "release_year": 1979,
    "data_bus_width_bits": 8,
    "internal_bus_width_bits": 16,
    "address_bus_width_bits": 20,
    "max_memory_bytes": 1048576,
    "clock_frequency_mhz": 4.77,
    "technology": "3 Âµm HMOS",
    "transistor_count": 29000,
    "die_size_mm2": 33
  },
  
  "pipeline_structure": {
    "pipeline_stages": 2,
    "stage_names": ["Fetch (BIU)", "Execute (EU)"],
    "pipeline_type": "in-order",
    "prefetch_queue": {
      "enabled": true,
      "size_bytes": 4,
      "type": "FIFO",
      "fill_policy": "opportunistic",
      "flush_on_branch": true,
      "flush_on_interrupt": true
    }
  },
  
  "bus_timing": {
    "cycles_per_bus_cycle": 4,
    "bus_states": ["T1_address", "T2_address_latch", "T3_data", "T4_data_latch"],
    "wait_states": {
      "ram_0ws": 0,
      "ram_typical": 0,
      "rom_bios": 1,
      "expansion_card": 2
    },
    "memory_bandwidth_theoretical_mbs": 1.1925,
    "memory_bandwidth_effective_mbs": 0.85
  },
  
  "instruction_mix": {
    "description": "Typical instruction distribution for general-purpose code",
    "source": "Profiled from Dhrystone, Whetstone, and DOS utilities",
    
    "register_move": {
      "mnemonic": "MOV reg,reg",
      "base_cycles": 2,
      "frequency": 0.15,
      "instruction_bytes": 2,
      "description": "Register to register move"
    },
    
    "register_alu": {
      "mnemonic": "ADD/SUB/AND/OR/XOR reg,reg",
      "base_cycles": 3,
      "frequency": 0.35,
      "instruction_bytes": 2,
      "description": "Register ALU operations"
    },
    
    "memory_load": {
      "mnemonic": "MOV reg,[mem]",
      "base_cycles": 13,
      "effective_address_cycles": 5,
      "memory_access_cycles": 4,
      "execution_cycles": 4,
      "frequency": 0.20,
      "instruction_bytes": 3,
      "description": "Memory to register load"
    },
    
    "memory_store": {
      "mnemonic": "MOV [mem],reg",
      "base_cycles": 14,
      "effective_address_cycles": 5,
      "memory_access_cycles": 4,
      "execution_cycles": 5,
      "frequency": 0.10,
      "instruction_bytes": 3,
      "description": "Register to memory store"
    },
    
    "memory_alu": {
      "mnemonic": "ADD/SUB/AND/OR reg,[mem]",
      "base_cycles": 20,
      "effective_address_cycles": 7,
      "memory_access_cycles": 4,
      "execution_cycles": 9,
      "frequency": 0.10,
      "instruction_bytes": 4,
      "description": "ALU operation with memory operand"
    },
    
    "jump_taken": {
      "mnemonic": "JMP/Jcc (taken)",
      "base_cycles": 15,
      "frequency": 0.05,
      "instruction_bytes": 2,
      "queue_flush_penalty": 12,
      "description": "Conditional/unconditional jump taken"
    },
    
    "jump_not_taken": {
      "mnemonic": "Jcc (not taken)",
      "base_cycles": 4,
      "frequency": 0.03,
      "instruction_bytes": 2,
      "queue_flush_penalty": 0,
      "description": "Conditional jump not taken"
    },
    
    "multiply_8bit": {
      "mnemonic": "MUL reg8",
      "base_cycles_min": 70,
      "base_cycles_max": 77,
      "base_cycles_avg": 73,
      "frequency": 0.008,
      "instruction_bytes": 2,
      "description": "8-bit unsigned multiply"
    },
    
    "multiply_16bit": {
      "mnemonic": "MUL reg16",
      "base_cycles_min": 118,
      "base_cycles_max": 133,
      "base_cycles_avg": 126,
      "frequency": 0.002,
      "instruction_bytes": 2,
      "description": "16-bit unsigned multiply"
    },
    
    "divide_8bit": {
      "mnemonic": "DIV reg8",
      "base_cycles_min": 80,
      "base_cycles_max": 90,
      "base_cycles_avg": 85,
      "frequency": 0.003,
      "instruction_bytes": 2,
      "description": "8-bit unsigned divide"
    },
    
    "divide_16bit": {
      "mnemonic": "DIV reg16",
      "base_cycles_min": 144,
      "base_cycles_max": 162,
      "base_cycles_avg": 153,
      "frequency": 0.002,
      "instruction_bytes": 2,
      "description": "16-bit unsigned divide"
    },
    
    "call_procedure": {
      "mnemonic": "CALL near",
      "base_cycles": 23,
      "frequency": 0.003,
      "instruction_bytes": 3,
      "queue_flush_penalty": 12,
      "stack_operations": 2,
      "description": "Near procedure call"
    },
    
    "return": {
      "mnemonic": "RET",
      "base_cycles": 20,
      "frequency": 0.002,
      "instruction_bytes": 1,
      "queue_flush_penalty": 12,
      "stack_operations": 2,
      "description": "Return from procedure"
    }
  },
  
  "queueing_parameters": {
    "description": "Parameters for M/M/1 queueing model of BIU and EU",
    
    "biu_fetch_unit": {
      "queue_type": "M/M/1",
      "arrival_rate_lambda": "computed",
      "service_rate_mu": "clock_mhz * 1e6 / 4",
      "service_time_mean_cycles": 4.0,
      "service_time_stddev_cycles": 0.0,
      "queue_discipline": "FIFO",
      "utilization_factor_rho": "computed"
    },
    
    "eu_execution_unit": {
      "queue_type": "M/M/1",
      "arrival_rate_lambda": "computed",
      "service_rate_mu": "computed",
      "service_time_mean_cycles": "weighted_by_instruction_mix",
      "service_time_stddev_cycles": "computed",
      "queue_discipline": "FIFO",
      "utilization_factor_rho": "computed"
    },
    
    "bus_contention": {
      "shared_resource": "system_bus",
      "priority_scheme": "EU_memory_access > BIU_prefetch",
      "contention_probability": "computed",
      "blocking_probability": "computed"
    }
  },
  
  "derived_metrics": {
    "avg_instruction_bytes": 2.5,
    "avg_instruction_cycles_base": 7.5,
    "theoretical_max_ipc": 0.5,
    "typical_ipc_range": [0.25, 0.35],
    "memory_bound_ipc": 0.18,
    "compute_bound_ipc": 0.33,
    
    "bottleneck_analysis": {
      "primary_bottleneck": "8-bit bus bandwidth",
      "secondary_bottleneck": "queue flush on branches",
      "tertiary_bottleneck": "slow multiply/divide"
    }
  },
  
  "calibration_settings": {
    "target_ipc": null,
    "measured_cpi": null,
    "tolerance_percent": 5.0,
    "max_iterations": 20,
    "convergence_threshold": 0.02,
    
    "adjustable_parameters": [
      "wait_states",
      "bus_contention_factor",
      "queue_drain_rate",
      "instruction_mix_frequencies"
    ],
    
    "fixed_parameters": [
      "clock_frequency",
      "queue_size",
      "cycles_per_bus_cycle",
      "data_bus_width"
    ]
  },
  
  "validation_benchmarks": {
    "dhrystone_2_1": {
      "expected_dhrystones_per_second": 240,
      "expected_vax_mips": 0.137,
      "expected_ipc": 0.318,
      "bottleneck": "EU execution"
    },
    
    "whetstone": {
      "expected_whetstones_per_second": 50,
      "expected_mips": 0.125,
      "expected_ipc": 0.280,
      "bottleneck": "floating point (software emulation)"
    },
    
    "memory_bandwidth": {
      "expected_bandwidth_mbs": 0.82,
      "expected_ipc": 0.172,
      "bottleneck": "memory access"
    },
    
    "branch_heavy": {
      "expected_ipc": 0.245,
      "branch_frequency": 0.22,
      "bottleneck": "queue flush overhead"
    }
  },
  
  "comparison_with_8086": {
    "8086_queue_size": 6,
    "8086_data_bus_width": 16,
    "8086_fetch_rate_ratio": 2.0,
    "8088_performance_ratio": 0.65,
    "description": "8088 is ~35% slower than 8086 due to 8-bit bus bottleneck"
  },
  
  "extensions": {
    "future_models": [
      "Intel 80186/80188",
      "Intel 80286",
      "NEC V20/V30",
      "Harris 80C88"
    ],
    
    "additional_features_to_model": [
      "8087 math coprocessor",
      "DMA controller contention",
      "Interrupt latency",
      "Wait state variations",
      "Self-modifying code effects"
    ]
  },
  
  "references": {
    "datasheets": [
      "Intel 8088 Datasheet (1979)",
      "iAPX 86,88 User's Manual (Intel, 1981)"
    ],
    
    "books": [
      "The 8086 Book - Rector & Alexy (1980)",
      "The IBM Personal Computer - Bradley (1984)"
    ],
    
    "papers": [
      "Pipelining in the 8086 - Intel AP-67 (1980)",
      "Inside the 8086 processor's instruction prefetch - Shirriff (2023)"
    ],
    
    "tools": [
      "PCem - Cycle-accurate emulator",
      "86Box - Hardware-accurate emulation",
      "DOSBox-X - Enhanced DOS emulator"
    ]
  },
  
  "notes": {
    "modeling_assumptions": [
      "Zero wait state RAM (best case)",
      "No DMA contention",
      "No interrupt handling during measurement",
      "Deterministic bus timing (no DRAM refresh penalty)",
      "Exponential service time distributions (M/M/1)"
    ],
    
    "known_limitations": [
      "Does not model self-modifying code",
      "Does not model cache effects (8088 has no cache)",
      "Does not model floating point coprocessor",
      "Branch prediction is always wrong (no branch predictor)"
    ],
    
    "accuracy_notes": [
      "Model accuracy: 2-5% error on most benchmarks",
      "Outliers: Self-modifying code shows higher error",
      "Best accuracy: Compute-bound workloads",
      "Lower accuracy: I/O-bound workloads (not modeled)"
    ]
  }
}
