{
  "processor": "Mostek 3870",
  "manufacturer": "Mostek",
  "year": 1977,
  "schema_version": "1.0",
  "base_architecture": "f8",
  "base_timing_reference": "models/other/f8/timing/f8_timing.json",
  "timing_notes": "Single-chip F8 derivative with integrated ROM/RAM/IO; same instruction set as Fairchild F8 but single-chip; 4MHz clock; instruction timing in machine cycles (1 MC = 2 clock periods)",
  "source": "Mostek MK3870 datasheet, F8 architecture reference",
  "instruction_count": 42,
  "instructions": [
    {"mnemonic": "LR", "bytes": 1, "cycles": 4, "category": "data_transfer", "addressing_mode": "register", "flags_affected": "none", "notes": "Load register (Acc to/from scratchpad)"},
    {"mnemonic": "LR_A_KU", "bytes": 1, "cycles": 4, "category": "data_transfer", "addressing_mode": "register", "flags_affected": "none", "notes": "Load A from K upper"},
    {"mnemonic": "LR_A_KL", "bytes": 1, "cycles": 4, "category": "data_transfer", "addressing_mode": "register", "flags_affected": "none", "notes": "Load A from K lower"},
    {"mnemonic": "LR_A_QU", "bytes": 1, "cycles": 4, "category": "data_transfer", "addressing_mode": "register", "flags_affected": "none", "notes": "Load A from Q upper"},
    {"mnemonic": "LR_A_QL", "bytes": 1, "cycles": 4, "category": "data_transfer", "addressing_mode": "register", "flags_affected": "none", "notes": "Load A from Q lower"},
    {"mnemonic": "LR_K_PC", "bytes": 1, "cycles": 6, "category": "data_transfer", "addressing_mode": "register", "flags_affected": "none", "notes": "Save PC to K (backup register)"},
    {"mnemonic": "LR_PC_K", "bytes": 1, "cycles": 6, "category": "data_transfer", "addressing_mode": "register", "flags_affected": "none", "notes": "Restore PC from K"},
    {"mnemonic": "LI", "bytes": 2, "cycles": 6, "category": "data_transfer", "addressing_mode": "immediate", "flags_affected": "none", "notes": "Load immediate byte to accumulator"},
    {"mnemonic": "LIS", "bytes": 1, "cycles": 4, "category": "data_transfer", "addressing_mode": "immediate", "flags_affected": "none", "notes": "Load immediate short (4-bit)"},
    {"mnemonic": "LM", "bytes": 1, "cycles": 7, "category": "memory", "addressing_mode": "indirect", "flags_affected": "none", "notes": "Load from memory via DC0"},
    {"mnemonic": "ST", "bytes": 1, "cycles": 7, "category": "memory", "addressing_mode": "indirect", "flags_affected": "none", "notes": "Store to memory via DC0"},
    {"mnemonic": "AI", "bytes": 2, "cycles": 6, "category": "alu", "addressing_mode": "immediate", "flags_affected": "C,Z,S,O", "notes": "Add immediate to accumulator"},
    {"mnemonic": "AS", "bytes": 1, "cycles": 4, "category": "alu", "addressing_mode": "register", "flags_affected": "C,Z,S,O", "notes": "Add scratchpad to accumulator"},
    {"mnemonic": "ASD", "bytes": 1, "cycles": 6, "category": "alu", "addressing_mode": "register", "flags_affected": "C,Z,S", "notes": "Add scratchpad decimal"},
    {"mnemonic": "CI", "bytes": 2, "cycles": 6, "category": "alu", "addressing_mode": "immediate", "flags_affected": "C,Z,S,O", "notes": "Compare immediate"},
    {"mnemonic": "CM", "bytes": 1, "cycles": 7, "category": "alu", "addressing_mode": "indirect", "flags_affected": "C,Z,S,O", "notes": "Compare memory"},
    {"mnemonic": "INC", "bytes": 1, "cycles": 4, "category": "alu", "addressing_mode": "implied", "flags_affected": "Z,S,O", "notes": "Increment accumulator"},
    {"mnemonic": "NS", "bytes": 1, "cycles": 4, "category": "alu", "addressing_mode": "register", "flags_affected": "Z,S", "notes": "AND scratchpad with accumulator"},
    {"mnemonic": "NI", "bytes": 2, "cycles": 6, "category": "alu", "addressing_mode": "immediate", "flags_affected": "Z,S", "notes": "AND immediate"},
    {"mnemonic": "XI", "bytes": 2, "cycles": 6, "category": "alu", "addressing_mode": "immediate", "flags_affected": "Z,S", "notes": "XOR immediate"},
    {"mnemonic": "XS", "bytes": 1, "cycles": 4, "category": "alu", "addressing_mode": "register", "flags_affected": "Z,S", "notes": "XOR scratchpad"},
    {"mnemonic": "OI", "bytes": 2, "cycles": 6, "category": "alu", "addressing_mode": "immediate", "flags_affected": "Z,S", "notes": "OR immediate"},
    {"mnemonic": "SL", "bytes": 1, "cycles": 4, "category": "alu", "addressing_mode": "implied", "flags_affected": "C,Z,S,O", "notes": "Shift left 1 bit"},
    {"mnemonic": "SR", "bytes": 1, "cycles": 4, "category": "alu", "addressing_mode": "implied", "flags_affected": "C,Z,S,O", "notes": "Shift right 1 bit"},
    {"mnemonic": "COM", "bytes": 1, "cycles": 4, "category": "alu", "addressing_mode": "implied", "flags_affected": "Z,S", "notes": "Complement accumulator"},
    {"mnemonic": "CLR", "bytes": 1, "cycles": 4, "category": "data_transfer", "addressing_mode": "implied", "flags_affected": "Z,S", "notes": "Clear accumulator"},
    {"mnemonic": "BR", "bytes": 2, "cycles": 8, "category": "control", "addressing_mode": "pc_relative", "flags_affected": "none", "notes": "Branch unconditional"},
    {"mnemonic": "BZ", "bytes": 2, "cycles": 8, "category": "control", "addressing_mode": "pc_relative", "flags_affected": "none", "notes": "Branch if zero"},
    {"mnemonic": "BNZ", "bytes": 2, "cycles": 8, "category": "control", "addressing_mode": "pc_relative", "flags_affected": "none", "notes": "Branch if not zero"},
    {"mnemonic": "BC", "bytes": 2, "cycles": 8, "category": "control", "addressing_mode": "pc_relative", "flags_affected": "none", "notes": "Branch if carry"},
    {"mnemonic": "BNC", "bytes": 2, "cycles": 8, "category": "control", "addressing_mode": "pc_relative", "flags_affected": "none", "notes": "Branch if no carry"},
    {"mnemonic": "BT", "bytes": 2, "cycles": 8, "category": "control", "addressing_mode": "pc_relative", "flags_affected": "none", "notes": "Branch on test (general condition)"},
    {"mnemonic": "PI", "bytes": 3, "cycles": 11, "category": "control", "addressing_mode": "absolute", "flags_affected": "none", "notes": "Push and jump to immediate address"},
    {"mnemonic": "PK", "bytes": 1, "cycles": 8, "category": "control", "addressing_mode": "register", "flags_affected": "none", "notes": "Push and jump via K register"},
    {"mnemonic": "POP", "bytes": 1, "cycles": 8, "category": "control", "addressing_mode": "implied", "flags_affected": "none", "notes": "Pop return address (return)"},
    {"mnemonic": "DS", "bytes": 1, "cycles": 6, "category": "control", "addressing_mode": "register", "flags_affected": "Z,S,O", "notes": "Decrement scratchpad, skip if zero"},
    {"mnemonic": "IN", "bytes": 2, "cycles": 8, "category": "io", "addressing_mode": "direct", "flags_affected": "none", "notes": "Input from I/O port"},
    {"mnemonic": "OUT", "bytes": 2, "cycles": 8, "category": "io", "addressing_mode": "direct", "flags_affected": "none", "notes": "Output to I/O port"},
    {"mnemonic": "INS", "bytes": 1, "cycles": 6, "category": "io", "addressing_mode": "direct", "flags_affected": "Z,S", "notes": "Input short (ports 0-1)"},
    {"mnemonic": "OUTS", "bytes": 1, "cycles": 6, "category": "io", "addressing_mode": "direct", "flags_affected": "none", "notes": "Output short (ports 0-1)"},
    {"mnemonic": "DI", "bytes": 1, "cycles": 4, "category": "special", "addressing_mode": "implied", "flags_affected": "none", "notes": "Disable interrupts"},
    {"mnemonic": "NOP", "bytes": 1, "cycles": 4, "category": "nop", "addressing_mode": "implied", "flags_affected": "none", "notes": "No operation"}
  ]
}
