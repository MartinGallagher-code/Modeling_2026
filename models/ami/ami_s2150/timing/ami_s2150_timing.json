{
  "processor": "AMI S2150",
  "manufacturer": "AMI",
  "year": 1972,
  "schema_version": "1.0",
  "source": "AMI S2150 datasheet, American Microsystems Inc.",
  "instruction_count": 40,
  "base_architecture": "AMI S2000",
  "base_timing_reference": "../ami_s2000/timing/ami_s2000_timing.json",
  "timing_notes": "The S2150 is a variant of the S2000 with minor enhancements for specific calculator applications. It shares the same core instruction set and instruction timing as the S2000. Same PMOS technology at 200 kHz. 3200 transistors (slightly more than S2000 due to added I/O logic). Same 4-bit data width and 9-bit address space.",
  "instructions": [
    {"mnemonic": "ADC", "opcode": "0x01", "bytes": 1, "cycles": 6, "category": "alu", "addressing_mode": "register", "flags_affected": "C", "notes": "Add with carry, 4-bit BCD addition"},
    {"mnemonic": "ADD", "opcode": "0x02", "bytes": 1, "cycles": 6, "category": "alu", "addressing_mode": "register", "flags_affected": "C", "notes": "Add accumulator to register"},
    {"mnemonic": "SUB", "opcode": "0x03", "bytes": 1, "cycles": 6, "category": "alu", "addressing_mode": "register", "flags_affected": "C", "notes": "Subtract register from accumulator"},
    {"mnemonic": "SBC", "opcode": "0x04", "bytes": 1, "cycles": 6, "category": "alu", "addressing_mode": "register", "flags_affected": "C", "notes": "Subtract with borrow"},
    {"mnemonic": "AND", "opcode": "0x05", "bytes": 1, "cycles": 6, "category": "alu", "addressing_mode": "register", "flags_affected": "Z", "notes": "Logical AND accumulator with register"},
    {"mnemonic": "OR", "opcode": "0x06", "bytes": 1, "cycles": 6, "category": "alu", "addressing_mode": "register", "flags_affected": "Z", "notes": "Logical OR accumulator with register"},
    {"mnemonic": "XOR", "opcode": "0x07", "bytes": 1, "cycles": 6, "category": "alu", "addressing_mode": "register", "flags_affected": "Z", "notes": "Exclusive OR accumulator with register"},
    {"mnemonic": "CMP", "opcode": "0x08", "bytes": 1, "cycles": 6, "category": "alu", "addressing_mode": "register", "flags_affected": "C,Z", "notes": "Compare accumulator with register"},
    {"mnemonic": "INC", "opcode": "0x09", "bytes": 1, "cycles": 6, "category": "alu", "addressing_mode": "register", "flags_affected": "C,Z", "notes": "Increment register by 1"},
    {"mnemonic": "DEC", "opcode": "0x0A", "bytes": 1, "cycles": 6, "category": "alu", "addressing_mode": "register", "flags_affected": "C,Z", "notes": "Decrement register by 1"},
    {"mnemonic": "DAA", "opcode": "0x0B", "bytes": 1, "cycles": 6, "category": "alu", "addressing_mode": "implied", "flags_affected": "C", "notes": "Decimal adjust accumulator for BCD arithmetic"},
    {"mnemonic": "COM", "opcode": "0x0C", "bytes": 1, "cycles": 6, "category": "alu", "addressing_mode": "register", "flags_affected": "Z", "notes": "Complement accumulator (ones complement)"},
    {"mnemonic": "MOV", "opcode": "0x10", "bytes": 1, "cycles": 7, "category": "data_transfer", "addressing_mode": "register", "flags_affected": "none", "notes": "Move data between registers"},
    {"mnemonic": "LDA", "opcode": "0x11", "bytes": 1, "cycles": 7, "category": "data_transfer", "addressing_mode": "immediate", "flags_affected": "none", "notes": "Load accumulator with immediate 4-bit value"},
    {"mnemonic": "XCH", "opcode": "0x12", "bytes": 1, "cycles": 7, "category": "data_transfer", "addressing_mode": "register", "flags_affected": "none", "notes": "Exchange accumulator with register"},
    {"mnemonic": "SWP", "opcode": "0x13", "bytes": 1, "cycles": 7, "category": "data_transfer", "addressing_mode": "implied", "flags_affected": "none", "notes": "Swap nibbles in accumulator pair"},
    {"mnemonic": "CLR", "opcode": "0x14", "bytes": 1, "cycles": 7, "category": "data_transfer", "addressing_mode": "register", "flags_affected": "Z", "notes": "Clear register to zero"},
    {"mnemonic": "SET", "opcode": "0x15", "bytes": 1, "cycles": 7, "category": "data_transfer", "addressing_mode": "register", "flags_affected": "none", "notes": "Set register to all ones (0xF)"},
    {"mnemonic": "TAR", "opcode": "0x16", "bytes": 1, "cycles": 7, "category": "data_transfer", "addressing_mode": "register", "flags_affected": "none", "notes": "Transfer accumulator to register"},
    {"mnemonic": "TRA", "opcode": "0x17", "bytes": 1, "cycles": 7, "category": "data_transfer", "addressing_mode": "register", "flags_affected": "none", "notes": "Transfer register to accumulator"},
    {"mnemonic": "LDM", "opcode": "0x20", "bytes": 1, "cycles": 9, "category": "memory", "addressing_mode": "indirect", "flags_affected": "none", "notes": "Load from memory via indirect address register"},
    {"mnemonic": "STM", "opcode": "0x21", "bytes": 1, "cycles": 9, "category": "memory", "addressing_mode": "indirect", "flags_affected": "none", "notes": "Store to memory via indirect address register"},
    {"mnemonic": "LDX", "opcode": "0x22", "bytes": 1, "cycles": 9, "category": "memory", "addressing_mode": "indexed", "flags_affected": "none", "notes": "Load from indexed memory location"},
    {"mnemonic": "STX", "opcode": "0x23", "bytes": 1, "cycles": 9, "category": "memory", "addressing_mode": "indexed", "flags_affected": "none", "notes": "Store to indexed memory location"},
    {"mnemonic": "LAP", "opcode": "0x24", "bytes": 1, "cycles": 9, "category": "memory", "addressing_mode": "direct", "flags_affected": "none", "notes": "Load address pointer from memory"},
    {"mnemonic": "SAP", "opcode": "0x25", "bytes": 1, "cycles": 9, "category": "memory", "addressing_mode": "direct", "flags_affected": "none", "notes": "Store address pointer to memory"},
    {"mnemonic": "OUTA", "opcode": "0x30", "bytes": 1, "cycles": 10, "category": "io", "addressing_mode": "implied", "flags_affected": "none", "notes": "Output accumulator to display/segment driver"},
    {"mnemonic": "OUTD", "opcode": "0x31", "bytes": 1, "cycles": 10, "category": "io", "addressing_mode": "implied", "flags_affected": "none", "notes": "Output digit select for display multiplexing"},
    {"mnemonic": "INA", "opcode": "0x32", "bytes": 1, "cycles": 10, "category": "io", "addressing_mode": "implied", "flags_affected": "none", "notes": "Input from keyboard matrix to accumulator"},
    {"mnemonic": "INK", "opcode": "0x33", "bytes": 1, "cycles": 10, "category": "io", "addressing_mode": "implied", "flags_affected": "none", "notes": "Input key status (keyboard scan)"},
    {"mnemonic": "OUTB", "opcode": "0x34", "bytes": 1, "cycles": 10, "category": "io", "addressing_mode": "implied", "flags_affected": "none", "notes": "Output to secondary port (segment data)"},
    {"mnemonic": "OUTS", "opcode": "0x35", "bytes": 1, "cycles": 10, "category": "io", "addressing_mode": "implied", "flags_affected": "none", "notes": "Output strobe signal for display latch"},
    {"mnemonic": "JMP", "opcode": "0x40", "bytes": 2, "cycles": 8, "category": "control", "addressing_mode": "absolute", "flags_affected": "none", "notes": "Unconditional jump within ROM page"},
    {"mnemonic": "JC", "opcode": "0x41", "bytes": 2, "cycles": 8, "category": "control", "addressing_mode": "absolute", "flags_affected": "none", "notes": "Jump if carry flag set"},
    {"mnemonic": "JNC", "opcode": "0x42", "bytes": 2, "cycles": 8, "category": "control", "addressing_mode": "absolute", "flags_affected": "none", "notes": "Jump if carry flag clear"},
    {"mnemonic": "JZ", "opcode": "0x43", "bytes": 2, "cycles": 8, "category": "control", "addressing_mode": "absolute", "flags_affected": "none", "notes": "Jump if zero flag set"},
    {"mnemonic": "JNZ", "opcode": "0x44", "bytes": 2, "cycles": 8, "category": "control", "addressing_mode": "absolute", "flags_affected": "none", "notes": "Jump if zero flag clear"},
    {"mnemonic": "JSR", "opcode": "0x45", "bytes": 2, "cycles": 8, "category": "control", "addressing_mode": "absolute", "flags_affected": "none", "notes": "Jump to subroutine (push return address)"},
    {"mnemonic": "RET", "opcode": "0x46", "bytes": 1, "cycles": 8, "category": "control", "addressing_mode": "implied", "flags_affected": "none", "notes": "Return from subroutine (pop return address)"},
    {"mnemonic": "NOP", "opcode": "0x00", "bytes": 1, "cycles": 8, "category": "nop", "addressing_mode": "implied", "flags_affected": "none", "notes": "No operation, consumes one instruction cycle"}
  ]
}
