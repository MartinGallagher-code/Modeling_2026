{
  "processor": "K1801VM2",
  "manufacturer": "Angstrem (Soviet Union)",
  "year": 1983,
  "schema_version": "1.0",
  "source": "BK-0011M documentation; K1801VM2 datasheet",
  "base_architecture": "k1801vm1",
  "base_timing_reference": "../k1801vm1/timing/k1801vm1_timing.json",
  "timing_notes": "Enhanced Soviet PDP-11 microprocessor. Improved version of K1801VM1 with faster execution and additional addressing modes. 10 MHz clock. Used in BK-0011M and DVK-3 systems. Same PDP-11 instruction set, generally faster cycle counts due to improved microcode.",
  "instruction_count": 72,
  "instructions": [
    {"mnemonic": "MOV", "operands": "R,R", "bytes": 2, "cycles": 2, "category": "data_transfer", "addressing_mode": "register", "flags_affected": "NZV", "notes": "Faster than VM1 due to improved microcode"},
    {"mnemonic": "MOV", "operands": "R,(R)", "bytes": 2, "cycles": 4, "category": "data_transfer", "addressing_mode": "register_indirect", "flags_affected": "NZV", "notes": ""},
    {"mnemonic": "MOV", "operands": "(R),R", "bytes": 2, "cycles": 4, "category": "data_transfer", "addressing_mode": "register_indirect", "flags_affected": "NZV", "notes": ""},
    {"mnemonic": "MOV", "operands": "#imm,R", "bytes": 4, "cycles": 4, "category": "data_transfer", "addressing_mode": "immediate", "flags_affected": "NZV", "notes": ""},
    {"mnemonic": "MOV", "operands": "addr,R", "bytes": 4, "cycles": 6, "category": "data_transfer", "addressing_mode": "direct", "flags_affected": "NZV", "notes": ""},
    {"mnemonic": "CLR", "operands": "R", "bytes": 2, "cycles": 2, "category": "data_transfer", "addressing_mode": "register", "flags_affected": "NZVC", "notes": ""},
    {"mnemonic": "SWAB", "operands": "R", "bytes": 2, "cycles": 2, "category": "data_transfer", "addressing_mode": "register", "flags_affected": "NZVC", "notes": "Swap bytes"},
    {"mnemonic": "ADD", "operands": "R,R", "bytes": 2, "cycles": 2, "category": "alu", "addressing_mode": "register", "flags_affected": "NZVC", "notes": ""},
    {"mnemonic": "ADD", "operands": "(R),R", "bytes": 2, "cycles": 4, "category": "alu", "addressing_mode": "register_indirect", "flags_affected": "NZVC", "notes": ""},
    {"mnemonic": "ADD", "operands": "#imm,R", "bytes": 4, "cycles": 4, "category": "alu", "addressing_mode": "immediate", "flags_affected": "NZVC", "notes": ""},
    {"mnemonic": "SUB", "operands": "R,R", "bytes": 2, "cycles": 2, "category": "alu", "addressing_mode": "register", "flags_affected": "NZVC", "notes": ""},
    {"mnemonic": "CMP", "operands": "R,R", "bytes": 2, "cycles": 2, "category": "alu", "addressing_mode": "register", "flags_affected": "NZVC", "notes": ""},
    {"mnemonic": "CMP", "operands": "#imm,R", "bytes": 4, "cycles": 4, "category": "alu", "addressing_mode": "immediate", "flags_affected": "NZVC", "notes": ""},
    {"mnemonic": "INC", "operands": "R", "bytes": 2, "cycles": 2, "category": "alu", "addressing_mode": "register", "flags_affected": "NZV", "notes": ""},
    {"mnemonic": "DEC", "operands": "R", "bytes": 2, "cycles": 2, "category": "alu", "addressing_mode": "register", "flags_affected": "NZV", "notes": ""},
    {"mnemonic": "NEG", "operands": "R", "bytes": 2, "cycles": 2, "category": "alu", "addressing_mode": "register", "flags_affected": "NZVC", "notes": ""},
    {"mnemonic": "TST", "operands": "R", "bytes": 2, "cycles": 2, "category": "alu", "addressing_mode": "register", "flags_affected": "NZVC", "notes": ""},
    {"mnemonic": "BIC", "operands": "R,R", "bytes": 2, "cycles": 2, "category": "alu", "addressing_mode": "register", "flags_affected": "NZV", "notes": "Bit clear"},
    {"mnemonic": "BIS", "operands": "R,R", "bytes": 2, "cycles": 2, "category": "alu", "addressing_mode": "register", "flags_affected": "NZV", "notes": "Bit set"},
    {"mnemonic": "BIT", "operands": "R,R", "bytes": 2, "cycles": 2, "category": "bit", "addressing_mode": "register", "flags_affected": "NZV", "notes": "Bit test"},
    {"mnemonic": "XOR", "operands": "R,R", "bytes": 2, "cycles": 2, "category": "alu", "addressing_mode": "register", "flags_affected": "NZV", "notes": ""},
    {"mnemonic": "ASL", "operands": "R", "bytes": 2, "cycles": 2, "category": "alu", "addressing_mode": "register", "flags_affected": "NZVC", "notes": ""},
    {"mnemonic": "ASR", "operands": "R", "bytes": 2, "cycles": 2, "category": "alu", "addressing_mode": "register", "flags_affected": "NZVC", "notes": ""},
    {"mnemonic": "ROL", "operands": "R", "bytes": 2, "cycles": 2, "category": "alu", "addressing_mode": "register", "flags_affected": "NZVC", "notes": ""},
    {"mnemonic": "ROR", "operands": "R", "bytes": 2, "cycles": 2, "category": "alu", "addressing_mode": "register", "flags_affected": "NZVC", "notes": ""},
    {"mnemonic": "MUL", "operands": "R,R", "bytes": 2, "cycles": 32, "category": "multiply", "addressing_mode": "register", "flags_affected": "NZC", "notes": "Faster than VM1; ~32 cycles"},
    {"mnemonic": "DIV", "operands": "R,R", "bytes": 2, "cycles": 40, "category": "divide", "addressing_mode": "register", "flags_affected": "NZVC", "notes": "Faster than VM1; ~40 cycles"},
    {"mnemonic": "BR", "operands": "offset", "bytes": 2, "cycles": 2, "category": "control", "addressing_mode": "relative", "flags_affected": "", "notes": "Branch unconditional"},
    {"mnemonic": "BNE", "operands": "offset", "bytes": 2, "cycles": 2, "category": "control", "addressing_mode": "relative", "flags_affected": "", "notes": "Branch if not equal"},
    {"mnemonic": "BEQ", "operands": "offset", "bytes": 2, "cycles": 2, "category": "control", "addressing_mode": "relative", "flags_affected": "", "notes": "Branch if equal"},
    {"mnemonic": "SOB", "operands": "R,offset", "bytes": 2, "cycles": 3, "category": "control", "addressing_mode": "relative", "flags_affected": "", "notes": "Subtract one and branch"},
    {"mnemonic": "JMP", "operands": "(R)", "bytes": 2, "cycles": 2, "category": "control", "addressing_mode": "register_indirect", "flags_affected": "", "notes": "Jump indirect"},
    {"mnemonic": "JMP", "operands": "addr", "bytes": 4, "cycles": 4, "category": "control", "addressing_mode": "direct", "flags_affected": "", "notes": "Jump absolute"},
    {"mnemonic": "JSR", "operands": "R,addr", "bytes": 4, "cycles": 6, "category": "control", "addressing_mode": "direct", "flags_affected": "", "notes": "Jump to subroutine"},
    {"mnemonic": "RTS", "operands": "R", "bytes": 2, "cycles": 4, "category": "control", "addressing_mode": "register", "flags_affected": "", "notes": "Return from subroutine"},
    {"mnemonic": "RTI", "operands": "", "bytes": 2, "cycles": 6, "category": "control", "addressing_mode": "implied", "flags_affected": "all", "notes": "Return from interrupt"},
    {"mnemonic": "TRAP", "operands": "", "bytes": 2, "cycles": 8, "category": "control", "addressing_mode": "implied", "flags_affected": "", "notes": "Trap"},
    {"mnemonic": "EMT", "operands": "", "bytes": 2, "cycles": 8, "category": "control", "addressing_mode": "implied", "flags_affected": "", "notes": "Emulator trap"},
    {"mnemonic": "HALT", "operands": "", "bytes": 2, "cycles": 2, "category": "control", "addressing_mode": "implied", "flags_affected": "", "notes": "Halt"},
    {"mnemonic": "NOP", "operands": "", "bytes": 2, "cycles": 2, "category": "nop", "addressing_mode": "implied", "flags_affected": "", "notes": ""},
    {"mnemonic": "RESET", "operands": "", "bytes": 2, "cycles": 16, "category": "control", "addressing_mode": "implied", "flags_affected": "", "notes": "Reset external devices"}
  ]
}
