{
  "processor": "Zilog Z8",
  "manufacturer": "Zilog",
  "year": 1979,
  "schema_version": "1.0",
  "source": "Z8 MCU datasheet, Zilog 1979",
  "clock_mhz": 8.0,
  "instruction_count": 47,
  "notes": "The Z8 is an 8-bit single-chip microcontroller with 144-byte register file (124 GP + 20 control/status). Internal clock = external/2 = 4MHz effective. Cycle counts shown are in internal clock cycles. Addressing modes: r=working register (4-bit), R=register (8-bit), Ir/IR=indirect register, IM=immediate. Working register addressing (r,Ir) is faster because it uses a 4-bit embedded register field.",
  "instructions": [
    {"mnemonic": "LD", "opcode": "0xE4", "bytes": 2, "cycles": 6, "category": "data_transfer", "addressing_mode": "r,r", "flags_affected": "", "notes": "Load working register from working register"},
    {"mnemonic": "LD", "opcode": "0xE5", "bytes": 2, "cycles": 6, "category": "data_transfer", "addressing_mode": "r,Ir", "flags_affected": "", "notes": "Load working register from indirect working register"},
    {"mnemonic": "LD", "opcode": "0xE3", "bytes": 3, "cycles": 10, "category": "data_transfer", "addressing_mode": "R,R", "flags_affected": "", "notes": "Load register from register"},
    {"mnemonic": "LD", "opcode": "0xE7", "bytes": 3, "cycles": 10, "category": "data_transfer", "addressing_mode": "R,IR", "flags_affected": "", "notes": "Load register from indirect register"},
    {"mnemonic": "LD", "opcode": "0xC7", "bytes": 3, "cycles": 10, "category": "data_transfer", "addressing_mode": "r,R", "flags_affected": "", "notes": "Load working register from register"},
    {"mnemonic": "LD", "opcode": "0xD7", "bytes": 3, "cycles": 10, "category": "data_transfer", "addressing_mode": "R,r", "flags_affected": "", "notes": "Load register from working register"},
    {"mnemonic": "LD", "opcode": "0xE6", "bytes": 3, "cycles": 10, "category": "data_transfer", "addressing_mode": "R,IM", "flags_affected": "", "notes": "Load register with immediate"},
    {"mnemonic": "LD", "opcode": "0xEC", "bytes": 2, "cycles": 6, "category": "data_transfer", "addressing_mode": "r,IM", "flags_affected": "", "notes": "Load working register with immediate"},
    {"mnemonic": "LD", "opcode": "0xF5", "bytes": 2, "cycles": 6, "category": "data_transfer", "addressing_mode": "Ir,r", "flags_affected": "", "notes": "Store to indirect working register"},
    {"mnemonic": "LD", "opcode": "0xF3", "bytes": 3, "cycles": 10, "category": "data_transfer", "addressing_mode": "IR,R", "flags_affected": "", "notes": "Store to indirect register"},
    {"mnemonic": "LD", "opcode": "0xD4", "bytes": 3, "cycles": 10, "category": "data_transfer", "addressing_mode": "r,x(r)", "flags_affected": "", "notes": "Indexed addressing; base+offset"},
    {"mnemonic": "LD", "opcode": "0xC5", "bytes": 3, "cycles": 10, "category": "data_transfer", "addressing_mode": "x(r),r", "flags_affected": "", "notes": "Store indexed"},

    {"mnemonic": "LDC", "opcode": "0xC2", "bytes": 2, "cycles": 12, "category": "data_transfer", "addressing_mode": "r,Irr", "flags_affected": "", "notes": "Load from program memory"},
    {"mnemonic": "LDC", "opcode": "0xD2", "bytes": 2, "cycles": 12, "category": "data_transfer", "addressing_mode": "Irr,r", "flags_affected": "", "notes": "Store to program memory"},
    {"mnemonic": "LDCI", "opcode": "0xC3", "bytes": 2, "cycles": 18, "category": "data_transfer", "addressing_mode": "Ir,Irr", "flags_affected": "", "notes": "Load from program memory with auto-increment"},
    {"mnemonic": "LDCI", "opcode": "0xD3", "bytes": 2, "cycles": 18, "category": "data_transfer", "addressing_mode": "Irr,Ir", "flags_affected": "", "notes": "Store with auto-increment"},
    {"mnemonic": "LDE", "opcode": "0x82", "bytes": 2, "cycles": 12, "category": "data_transfer", "addressing_mode": "r,Irr", "flags_affected": "", "notes": "Load from external data memory"},
    {"mnemonic": "LDE", "opcode": "0x92", "bytes": 2, "cycles": 12, "category": "data_transfer", "addressing_mode": "Irr,r", "flags_affected": "", "notes": "Store to external data memory"},
    {"mnemonic": "LDEI", "opcode": "0x83", "bytes": 2, "cycles": 18, "category": "data_transfer", "addressing_mode": "Ir,Irr", "flags_affected": "", "notes": "Load external with auto-increment"},
    {"mnemonic": "LDEI", "opcode": "0x93", "bytes": 2, "cycles": 18, "category": "data_transfer", "addressing_mode": "Irr,Ir", "flags_affected": "", "notes": "Store external with auto-increment"},

    {"mnemonic": "POP", "opcode": "0x50", "bytes": 2, "cycles": 10, "category": "stack", "addressing_mode": "R", "flags_affected": "", "notes": "Pop from stack"},
    {"mnemonic": "PUSH", "opcode": "0x70", "bytes": 2, "cycles": 10, "category": "stack", "addressing_mode": "R", "flags_affected": "", "notes": "Push to stack (also 12 cycles for IR mode)"},

    {"mnemonic": "ADD", "opcode": "0x00", "bytes": 2, "cycles": 6, "category": "alu", "addressing_mode": "r,r", "flags_affected": "CZSVDH", "notes": "Add; R,R=10; R,IM=10; R,IR=10"},
    {"mnemonic": "ADC", "opcode": "0x10", "bytes": 2, "cycles": 6, "category": "alu", "addressing_mode": "r,r", "flags_affected": "CZSVDH", "notes": "Add with carry; same timing as ADD"},
    {"mnemonic": "SUB", "opcode": "0x20", "bytes": 2, "cycles": 6, "category": "alu", "addressing_mode": "r,r", "flags_affected": "CZSVDH", "notes": "Subtract; same timing as ADD"},
    {"mnemonic": "SBC", "opcode": "0x30", "bytes": 2, "cycles": 6, "category": "alu", "addressing_mode": "r,r", "flags_affected": "CZSVDH", "notes": "Subtract with carry; same timing"},
    {"mnemonic": "AND", "opcode": "0x50", "bytes": 2, "cycles": 6, "category": "alu", "addressing_mode": "r,r", "flags_affected": "-Z-V--", "notes": "Logical AND; R,R=10; R,IM=10"},
    {"mnemonic": "OR", "opcode": "0x40", "bytes": 2, "cycles": 6, "category": "alu", "addressing_mode": "r,r", "flags_affected": "-Z-V--", "notes": "Logical OR; same timing"},
    {"mnemonic": "XOR", "opcode": "0xB0", "bytes": 2, "cycles": 6, "category": "alu", "addressing_mode": "r,r", "flags_affected": "-Z-V--", "notes": "Exclusive OR; same timing"},
    {"mnemonic": "CP", "opcode": "0xA0", "bytes": 2, "cycles": 6, "category": "alu", "addressing_mode": "r,r", "flags_affected": "CZSV--", "notes": "Compare; R,R=10; R,IM=10"},
    {"mnemonic": "TCM", "opcode": "0x60", "bytes": 2, "cycles": 6, "category": "alu", "addressing_mode": "r,r", "flags_affected": "-Z-V--", "notes": "Test complement under mask; R,R=10"},
    {"mnemonic": "TM", "opcode": "0x70", "bytes": 2, "cycles": 6, "category": "alu", "addressing_mode": "r,r", "flags_affected": "-Z-V--", "notes": "Test under mask; R,R=10"},

    {"mnemonic": "INC", "opcode": "0x0E", "bytes": 1, "cycles": 6, "category": "alu", "addressing_mode": "r", "flags_affected": "-ZSV--", "notes": "Increment; R=10"},
    {"mnemonic": "DEC", "opcode": "0x00", "bytes": 2, "cycles": 6, "category": "alu", "addressing_mode": "r", "flags_affected": "-ZSV--", "notes": "Decrement; R=10"},
    {"mnemonic": "INCW", "opcode": "0xA0", "bytes": 2, "cycles": 10, "category": "alu", "addressing_mode": "RR", "flags_affected": "-ZSV--", "notes": "Increment word (16-bit)"},
    {"mnemonic": "DECW", "opcode": "0x80", "bytes": 2, "cycles": 10, "category": "alu", "addressing_mode": "RR", "flags_affected": "-ZSV--", "notes": "Decrement word (16-bit)"},
    {"mnemonic": "DA", "opcode": "0x40", "bytes": 2, "cycles": 8, "category": "alu", "addressing_mode": "R", "flags_affected": "CZSV--", "notes": "Decimal adjust"},
    {"mnemonic": "COM", "opcode": "0x60", "bytes": 2, "cycles": 6, "category": "alu", "addressing_mode": "R", "flags_affected": "-ZSV--", "notes": "Complement (one's complement)"},
    {"mnemonic": "CLR", "opcode": "0xB0", "bytes": 2, "cycles": 6, "category": "alu", "addressing_mode": "R", "flags_affected": "", "notes": "Clear register"},
    {"mnemonic": "SWAP", "opcode": "0xF0", "bytes": 2, "cycles": 8, "category": "alu", "addressing_mode": "R", "flags_affected": "-ZS---", "notes": "Swap nibbles"},
    {"mnemonic": "RL", "opcode": "0x90", "bytes": 2, "cycles": 6, "category": "alu", "addressing_mode": "R", "flags_affected": "CZS-V-", "notes": "Rotate left"},
    {"mnemonic": "RLC", "opcode": "0x10", "bytes": 2, "cycles": 6, "category": "alu", "addressing_mode": "R", "flags_affected": "CZS-V-", "notes": "Rotate left through carry"},
    {"mnemonic": "RR", "opcode": "0xE0", "bytes": 2, "cycles": 6, "category": "alu", "addressing_mode": "R", "flags_affected": "CZS-V-", "notes": "Rotate right"},
    {"mnemonic": "RRC", "opcode": "0xC0", "bytes": 2, "cycles": 6, "category": "alu", "addressing_mode": "R", "flags_affected": "CZS-V-", "notes": "Rotate right through carry"},
    {"mnemonic": "SRA", "opcode": "0xD0", "bytes": 2, "cycles": 6, "category": "alu", "addressing_mode": "R", "flags_affected": "CZS-V-", "notes": "Shift right arithmetic"},

    {"mnemonic": "JP", "opcode": "0x8D", "bytes": 3, "cycles": 12, "category": "control", "addressing_mode": "cc,DA", "flags_affected": "", "notes": "Conditional jump; 12 if taken, 10 if not"},
    {"mnemonic": "JP", "opcode": "0x30", "bytes": 2, "cycles": 8, "category": "control", "addressing_mode": "IRR", "flags_affected": "", "notes": "Jump indirect"},
    {"mnemonic": "JR", "opcode": "0x0B", "bytes": 2, "cycles": 12, "category": "control", "addressing_mode": "cc,RA", "flags_affected": "", "notes": "Jump relative; 12 if taken, 10 if not"},
    {"mnemonic": "DJNZ", "opcode": "0x0A", "bytes": 2, "cycles": 12, "category": "control", "addressing_mode": "r,RA", "flags_affected": "", "notes": "Decrement and jump if not zero; 12 if loop, 10 if exit"},

    {"mnemonic": "CALL", "opcode": "0xD4", "bytes": 3, "cycles": 20, "category": "control", "addressing_mode": "DA", "flags_affected": "", "notes": "Call subroutine; pushes PC"},
    {"mnemonic": "CALL", "opcode": "0xD6", "bytes": 2, "cycles": 20, "category": "control", "addressing_mode": "IRR", "flags_affected": "", "notes": "Call indirect"},
    {"mnemonic": "RET", "opcode": "0xAF", "bytes": 1, "cycles": 14, "category": "control", "addressing_mode": "implied", "flags_affected": "", "notes": "Return from subroutine"},
    {"mnemonic": "IRET", "opcode": "0xBF", "bytes": 1, "cycles": 16, "category": "control", "addressing_mode": "implied", "flags_affected": "CZSVDH", "notes": "Return from interrupt; restores flags"},

    {"mnemonic": "SRP", "opcode": "0x31", "bytes": 2, "cycles": 6, "category": "special", "addressing_mode": "IM", "flags_affected": "", "notes": "Set register pointer; selects working register window"},
    {"mnemonic": "CCF", "opcode": "0xEF", "bytes": 1, "cycles": 6, "category": "alu", "addressing_mode": "implied", "flags_affected": "C-----", "notes": "Complement carry flag"},
    {"mnemonic": "SCF", "opcode": "0xDF", "bytes": 1, "cycles": 6, "category": "alu", "addressing_mode": "implied", "flags_affected": "C-----", "notes": "Set carry flag"},
    {"mnemonic": "RCF", "opcode": "0xCF", "bytes": 1, "cycles": 6, "category": "alu", "addressing_mode": "implied", "flags_affected": "C-----", "notes": "Reset carry flag"},
    {"mnemonic": "NOP", "opcode": "0xFF", "bytes": 1, "cycles": 6, "category": "nop", "addressing_mode": "implied", "flags_affected": "", "notes": ""},
    {"mnemonic": "DI", "opcode": "0x8F", "bytes": 1, "cycles": 6, "category": "control", "addressing_mode": "implied", "flags_affected": "", "notes": "Disable interrupts"},
    {"mnemonic": "EI", "opcode": "0x9F", "bytes": 1, "cycles": 6, "category": "control", "addressing_mode": "implied", "flags_affected": "", "notes": "Enable interrupts"},
    {"mnemonic": "WDT", "opcode": "0x2F", "bytes": 1, "cycles": 2, "category": "special", "addressing_mode": "implied", "flags_affected": "", "notes": "Refresh watchdog timer"},
    {"mnemonic": "STOP", "opcode": "0x6F", "bytes": 1, "cycles": 6, "category": "special", "addressing_mode": "implied", "flags_affected": "", "notes": "Stop oscillator; enter low-power mode"},
    {"mnemonic": "HALT", "opcode": "0x7F", "bytes": 1, "cycles": 6, "category": "special", "addressing_mode": "implied", "flags_affected": "", "notes": "Halt; wait for interrupt or reset"}
  ]
}
